<!-- ============================================ -->
<!-- 6. detalle_calificacion.html -->
<!-- Guardar en: accounts/templates/accounts/detalle_calificacion.html -->
<!-- ============================================ -->
{% extends 'base.html' %}
{% load custom_filters %}

{% block title %}Detalle Calificación - NUAM{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1 style="color: #667eea;">Detalle de Calificación</h1>
        <div>
            <a href="{% url 'accounts:editar_calificacion' calificacion.pk %}" class="btn btn-primary">Editar</a>
            <a href="{% url 'accounts:lista_calificaciones' %}" class="btn btn-secondary">Volver</a>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
        <div>
            <h3 style="color: #667eea; margin-bottom: 1rem;">Información General</h3>
            <table style="width: 100%;">
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Instrumento:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.instrumento|default:"N/A" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Corredor:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.corredor_dueno|default:"N/A" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">RUT:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.rut_es_el_manual|default:"N/A" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Mercado:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.mercado|default:"N/A" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Año Comercial:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.ano_comercial|default:"N/A" }}</td>
                </tr>
            </table>
        </div>
        
        <div>
            <h3 style="color: #667eea; margin-bottom: 1rem;">Detalles Adicionales</h3>
            <table style="width: 100%;">
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Fecha Pago:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.fecha_pago|date:"d/m/Y"|default:"N/A" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Tipo Sociedad:</td>
                    <td style="padding: 0.75rem;">{{ calificacion.tipo_sociedad|default:"N/A" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Valor Histórico:</td>
                    <td style="padding: 0.75rem;">${{ calificacion.valor_historico|default:"0" }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 0.75rem; font-weight: 600;">Es Local:</td>
                    <td style="padding: 0.75rem;">{% if calificacion.es_local %}✓ Sí{% else %}✗ No{% endif %}</td>
                </tr>
            </table>
        </div>
    </div>
    
    <div style="margin-top: 2rem;">
        <h3 style="color: #667eea; margin-bottom: 1rem;">Factores</h3>
        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem;">
            {% for i in "012345678901234567890123456789" %}
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 5px; text-align: center;">
                    <div style="font-weight: 600; color: #667eea;">Factor {{ i|add:"8" }}</div>
                    <div style="margin-top: 0.5rem;">
                        {% with factor_name="factor_"|add:i|add:"8" %}
                            {{ calificacion|attr:factor_name|default:"N/A" }}
                        {% endwith %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

